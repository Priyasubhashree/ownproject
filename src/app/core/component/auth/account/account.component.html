<div class="flex h-screen">
  <!-- Sidebar -->
  <!-- <div
    id="sidebar"
    class="bg-gray-800 text-white w-64 space-y-6 p-4"
    [ngClass]="{ hidden: isSidebarHidden }"
  >
    <div class="text-xl font-semibold">MyApp</div>
    <nav class="space-y-2">
      <a
        href="#"
        routerLink="/account-link"
        id="account-link"
        (click)="showAccountForm()"
        class="block text-gray-300 hover:bg-gray-700 px-3 py-2 rounded"
      >
        Account
      </a>
      <a
        href=""
        routerLink="/customerForm-link"
        id="customerForm-link"
        (click)="showCustomerForm()"
        class="block text-gray-300 hover:bg-gray-700 px-3 py-2 rounded"
      >
        Customer
      </a>
      <a
        href="#"
        id="meterForm-link"
        (click)="showMeterForm()"
        class="block text-gray-300 hover:bg-gray-700 px-3 py-2 rounded"
      >
        Meter
      </a>
      <a
        href="#"
        id="mapForm-link"
        (click)="showMapForm()"
        class="block text-gray-300 hover:bg-gray-700 px-3 py-2 rounded"
      >
        Map
      </a>
    </nav>
  </div> -->

  <!-- Main content -->
  <div class="flex-1 flex flex-col p-14">
    <button
      id="toggle-sidebar"
      class="md:hidden text-gray-800 focus:outline-none mb-4"
      (click)="toggleSidebar()"
    >
      <svg
        class="h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16m-7 6h7"
        />
      </svg>
    </button>

    <!-- Account Form -->
    <div
      id="account-form"
      *ngIf="showingAccountForm"
      class="bg-gradient-to-r from-gray-300 via-gray-400 to-gray-500 shadow-md rounded px-8 py-14 w-full max-w-lg mx-auto"
    >
      <h2 class="text-2xl font-semibold mb-6">Account Details</h2>
      <form [formGroup]="accountForm" (ngSubmit)="handleAccount()">
        <!-- Account ID -->
        <div class="mb-4 sticky-field-container">
          <label
            class="block text-gray-700 text-sm font-bold mb-2"
            for="account-id"
          >
            Account ID
          </label>
          <input
            formControlName="accountId"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="account-id"
            type="text"
            placeholder="Enter Account ID"
          />
          <div
            *ngIf="
              accountForm.get('accountId')?.invalid &&
              accountForm.get('accountId')?.touched
            "
          >
            <small
              class="text-red-600"
              *ngIf="accountForm.get('accountId')?.hasError('required')"
            >
              Account ID is required.
            </small>
          </div>
        </div>

        <!-- Name -->
        <div class="mb-4 sticky-field-container">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="name">
            Name
          </label>
          <input
            formControlName="name"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="name"
            type="text"
            placeholder="Enter Name"
          />
          <div
            *ngIf="
              accountForm.get('name')?.invalid &&
              accountForm.get('name')?.touched
            "
          >
            <small
              class="text-red-600"
              *ngIf="accountForm.get('name')?.hasError('required')"
            >
              Name is required.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('name')?.hasError('minlength')"
            >
              Name must be at least 2 characters long.
            </small>
          </div>
        </div>

        <!-- Phone -->
        <div class="mb-4 sticky-field-container">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="phone">
            Phone
          </label>
          <input
            formControlName="phone"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="phone"
            type="text"
            placeholder="Enter Phone Number"
          />
          <div
            *ngIf="
              accountForm.get('phone')?.invalid &&
              accountForm.get('phone')?.touched
            "
          >
            <small
              class="text-red-600"
              *ngIf="accountForm.get('phone')?.hasError('required')"
            >
              Phone number is required.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('phone')?.hasError('pattern')"
            >
              Phone number must be numeric.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('phone')?.hasError('minlength')"
            >
              Phone number must be 10 digits long.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('phone')?.hasError('maxlength')"
            >
              Phone number must be 10 digits long.
            </small>
          </div>
        </div>

        <!-- Email Field -->
        <div class="mb-4 sticky-field-container relative">
          <label for="email" class="font-medium">Email</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            required
            placeholder="Enter your email"
            class="mt-2 px-3 py-2 block w-full p-2.5 text-gray-800 transition-colors duration-300 bg-white border border-gray-300 rounded-lg shadow-sm outline-none dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600"
            (input)="convertToLowercase()"
          />
          <div
            *ngIf="
              accountForm.get('email')?.invalid &&
              (accountForm.get('email')?.dirty ||
                accountForm.get('email')?.touched)
            "
          >
            <small
              *ngIf="accountForm.get('email')?.hasError('required')"
              class="text-red-600"
            >
              Email is required.
            </small>
            <small
              *ngIf="accountForm.get('email')?.hasError('email')"
              class="text-red-600"
            >
              Invalid email address.
            </small>
          </div>
          <div
            *ngIf="isVerified"
            class="absolute right-3 top-2 flex items-center text-green-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"
              />
            </svg>
          </div>
        </div>

        <!-- Password -->
        <div class="mb-4 sticky-field-container relative">
          <label
            class="block text-black text-sm font-bold mb-2"
            for="password"
          >
            Password
          </label>
          <input
            formControlName="password"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline"
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Enter Password"
          />
          <button
            type="button"
            class="absolute right-3 top-2 text-black"
            (click)="togglePasswordVisibility()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l9 9 9-9-9-9-9 9zm0 0l9 9 9-9"
              />
            </svg>
          </button>
          <div
            *ngIf="
              accountForm.get('password')?.invalid &&
              accountForm.get('password')?.touched
            "
          >
            <small
              class="text-red-600"
              *ngIf="accountForm.get('password')?.hasError('required')"
            >
              Password is required.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('password')?.hasError('minlength')"
            >
              Password must be at least 6 characters long.
            </small>
          </div>
        </div>

        <!-- Re-enter Password -->
        <div class="mb-4 sticky-field-container relative">
          <label
            class="block text-black text-sm font-bold mb-2"
            for="rePassword"
          >
            Re-enter Password
          </label>
          <input
            formControlName="rePassword"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline"
            id="rePassword"
            [type]="showRePassword ? 'text' : 'password'"
            placeholder="Re-enter Password"
          />
          <button
            type="button"
            class="absolute right-3 top-2 text-black"
            (click)="toggleRePasswordVisibility()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l9 9 9-9-9-9-9 9zm0 0l9 9 9-9"
              />
            </svg>
          </button>
          <div
            *ngIf="
              accountForm.get('rePassword')?.invalid &&
              accountForm.get('rePassword')?.touched
            "
          >
            <small
              class="text-red-600"
              *ngIf="accountForm.get('rePassword')?.hasError('required')"
            >
              Re-entering password is required.
            </small>
            <small
              class="text-red-600"
              *ngIf="accountForm.get('rePassword')?.hasError('minlength')"
            >
              Password must be at least 6 characters long.
            </small>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="flex items-center justify-between">
          <button
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
            type="button"
            (click)="onSaveAccount()" 
          >
            Save
          </button>
        </div>
        
      </form>
    </div>
  </div>
  <!-- Toast Notification -->
  <div
    *ngIf="toastMessage"
    class="fixed bottom-4 right-4 flex items-center w-64 max-w-xs p-4 space-x-4 text-white bg-blue-600 rounded-lg shadow-lg"
  >
    <span class="material-icons"></span>
    <p class="text-sm">{{ toastMessage }}</p>
    <button
      class="text-lg font-semibold text-white focus:outline-none"
      (click)="toastMessage = ''"
    >
      &times;
    </button>
  </div>
</div>
